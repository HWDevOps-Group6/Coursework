{
  "info": {
    "_postman_id": "e6f4b47f-d0b6-4fc8-bac3-842eba4e82a2",
    "name": "Testing Coursework",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Health Checks",
      "item": [
        {
          "name": "Check Auth Service Health",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a2ba7255-948b-4b54-8e50-fe950a5fc05b",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "92b0fc9e-9e63-47ba-9f06-1e21d64a1214",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{auth_url}}/health",
              "host": [
                "{{auth_url}}"
              ],
              "path": [
                "health"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Check Gateway Service health",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a64c4549-f8d4-4206-adae-bd2ffe859fe8",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "7a3d9122-9f4c-4161-903e-5cc3ea1628ed",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "1509e37b-6544-4fc7-a8d9-9115a529fec2",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{gateway_url}}/health",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "health"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Check Patient Registration Health",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "39c971b9-b4a7-49fb-8c48-7e7891581712",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "ec2b38e5-0190-420f-ac5b-de0191fc1c4d",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "a5d83197-951a-4f39-a3f0-688635afac76",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{patient_reg_url}}/health",
              "host": [
                "{{patient_reg_url}}"
              ],
              "path": [
                "health"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Check Diagnostics+Vitals Health",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a0475fa7-01ad-4147-8c17-5973b9a10e48",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "779856ac-3482-4e3e-a4ac-bb0fe2580b99",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "e6245721-e8a6-4e59-9e99-c1f11cbf7c42",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{diagnostics_vitals_url}}/health",
              "host": [
                "{{diagnostics_vitals_url}}"
              ],
              "path": [
                "health"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "18ca5775-5085-4672-aba2-b56692235148"
    },
    {
      "name": "Authentication & Staff",
      "item": [
        {
          "name": "Register Doctor",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "10478f57-f4a8-4335-bdca-8f31098aeb97",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "const json = pm.response.json();",
                  "pm.test(\"Doctor registered successfully\", function () {",
                  "    pm.expect(json.success).to.eql(true);",
                  "    pm.expect(json.data.user.role).to.eql(\"doctor\");",
                  "    pm.expect(json.data.user.email).to.eql(pm.collectionVariables.get(\"doctor_register_email\"));",
                  "    pm.expect(json.data.token).to.be.a(\"string\").and.not.empty;",
                  "});",
                  "pm.collectionVariables.set(\"doctor_register_token\", json.data.token);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "4715acb4-cb5a-45a7-9663-2dbd463cd13d",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "da152861-f141-44f0-ae6e-05cfd9ecb588",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{doctor_register_email}}\",\n  \"password\": \"SecurePass123!\",\n  \"firstName\": \"Test\",\n  \"lastName\": \"Doctor\",\n  \"role\": \"doctor\",\n  \"phoneNumber\": \"0500000001\",\n  \"department\": \"Medicine\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/auth/register",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "auth",
                "register"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Register Nurse",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "8e910ce0-6292-4519-8959-5a41e74b0e85",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "const json = pm.response.json();",
                  "pm.test(\"Nurse registered successfully\", function () {",
                  "    pm.expect(json.success).to.eql(true);",
                  "    pm.expect(json.data.user.role).to.eql(\"nurse\");",
                  "    pm.expect(json.data.user.email).to.eql(pm.collectionVariables.get(\"nurse_register_email\"));",
                  "    pm.expect(json.data.token).to.be.a(\"string\").and.not.empty;",
                  "});",
                  "pm.collectionVariables.set(\"nurse_register_token\", json.data.token);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "5a6d373e-fffd-427c-8dde-85400179f9f7",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{nurse_register_email}}\",\n  \"password\": \"SecurePass123!\",\n  \"firstName\": \"Test\",\n  \"lastName\": \"Nurse\",\n  \"role\": \"nurse\",\n  \"phoneNumber\": \"0500000002\",\n  \"department\": [\"Pediatrics\", \"ENT\"]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/auth/register",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "auth",
                "register"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Register Clinician",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "139d1ab7-61e0-4459-84c6-3be95d6b90a0",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "const json = pm.response.json();",
                  "pm.test(\"Clinician registered successfully\", function () {",
                  "    pm.expect(json.success).to.eql(true);",
                  "    pm.expect(json.data.user.role).to.eql(\"clinician\");",
                  "    pm.expect(json.data.user.email).to.eql(pm.collectionVariables.get(\"clinician_register_email\"));",
                  "    pm.expect(json.data.token).to.be.a(\"string\").and.not.empty;",
                  "});",
                  "pm.collectionVariables.set(\"clinician_register_token\", json.data.token);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "ca4760f8-2f84-423e-b91e-39d5a3b27a92",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{clinician_register_email}}\",\n  \"password\": \"SecurePass123!\",\n  \"firstName\": \"Test\",\n  \"lastName\": \"Clinician\",\n  \"role\": \"clinician\",\n  \"phoneNumber\": \"0500000004\",\n  \"department\": [\"Medicine\", \"Oncology\"]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/auth/register",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "auth",
                "register"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Register Clerk",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "f333f8b3-f08e-438c-b650-083ce31ecbb9",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "const json = pm.response.json();",
                  "pm.test(\"Clerk registered successfully\", function () {",
                  "    pm.expect(json.success).to.eql(true);",
                  "    pm.expect(json.data.user.role).to.eql(\"clerk\");",
                  "    pm.expect(json.data.user.email).to.eql(pm.collectionVariables.get(\"clerk_register_email\"));",
                  "    pm.expect(json.data.token).to.be.a(\"string\").and.not.empty;",
                  "});",
                  "pm.collectionVariables.set(\"clerk_register_token\", json.data.token);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "99ed66ea-7bc3-4bae-9f73-a33cc049e935",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "6c151aaf-4433-4518-b51e-e31db105c712",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{clerk_register_email}}\",\n  \"password\": \"SecurePass123!\",\n  \"firstName\": \"Test\",\n  \"lastName\": \"Clerk\",\n  \"role\": \"clerk\",\n  \"phoneNumber\": \"0500000003\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/auth/register",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "auth",
                "register"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Logging in as a Doctor",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "4ee51074-1b59-4b17-b2f7-932c7a4d8dd3",
                "exec": [
                  "pm.test(\"Successful POST request\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "});",
                  "",
                  "var jsonData = pm.response.json();",
                  "var token = jsonData.data && jsonData.data.token ? jsonData.data.token : jsonData.token;",
                  "pm.collectionVariables.set(\"doctor_auth_token\", token);",
                  "",
                  "pm.test(\"Token was successfully extracted\", function () {",
                  "    pm.expect(token).to.be.a('string').and.to.have.length.above(0);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "68353f86-f7a0-47bb-aa71-54acf5480c83",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "b94b5b92-4c23-412f-8a7b-204c3f5bf4f7",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{doctor_register_email}}\",\n  \"password\": \"SecurePass123!\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/auth/login",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Logging in as a Clerk",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "7205cec9-95c1-43ca-bd94-2a2e95c4037c",
                "exec": [
                  "pm.test(\"Successful POST request\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "});",
                  "",
                  "var jsonData = pm.response.json();",
                  "var token = jsonData.data && jsonData.data.token ? jsonData.data.token : jsonData.token;",
                  "pm.collectionVariables.set(\"clerk_auth_token\", token);",
                  "",
                  "pm.test(\"Token was successfully extracted\", function () {",
                  "    pm.expect(token).to.be.a('string').and.to.have.length.above(0);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "0d0f4dd8-1fcb-4f20-8736-c20aca00423b",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "01c8aa7c-9fdd-4d42-82dd-7d050da7da2f",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{clerk_register_email}}\",\n  \"password\": \"SecurePass123!\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/auth/login",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Logging in as a Nurse",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "765674eb-82d6-433d-91fd-0ac63254319b",
                "exec": [
                  "pm.test(\"Successful POST request\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "});",
                  "",
                  "var jsonData = pm.response.json();",
                  "var token = jsonData.data && jsonData.data.token ? jsonData.data.token : jsonData.token;",
                  "pm.collectionVariables.set(\"nurse_auth_token\", token);",
                  "",
                  "pm.test(\"Token was successfully extracted\", function () {",
                  "    pm.expect(token).to.be.a('string').and.to.have.length.above(0);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "30296076-1254-45f6-9458-6980a6b842ce",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "7e7d3f53-ac42-418c-af76-c7353325cafe",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{nurse_register_email}}\",\n  \"password\": \"SecurePass123!\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/auth/login",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Logging in as a Clinician",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "56bef4a5-d5d3-4ea1-b009-79d01fdd3cda",
                "exec": [
                  "pm.test(\"Successful POST request\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "});",
                  "",
                  "var jsonData = pm.response.json();",
                  "var token = jsonData.data && jsonData.data.token ? jsonData.data.token : jsonData.token;",
                  "pm.collectionVariables.set(\"clinician_auth_token\", token);",
                  "",
                  "pm.test(\"Token was successfully extracted\", function () {",
                  "    pm.expect(token).to.be.a('string').and.to.have.length.above(0);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "c7e7915c-2cbf-4e6e-960e-fa325459931d",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "ebfc3820-df32-44a3-922e-f522fe3e949b",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{clinician_register_email}}\",\n  \"password\": \"SecurePass123!\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/auth/login",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Checking Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "4243ff1f-04f9-4a56-8327-3aba4edafce7",
                "exec": [
                  "pm.test(\"Successful PUT request\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201, 204]);",
                  "});",
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "401e0dcf-ff51-4f8b-b897-92460d9a497d",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "cf93e40b-34db-4973-9f5d-a96efca16ba4",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{doctor_register_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"name\": \"Add your name in the body\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/auth/me",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "auth",
                "me"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "7e14b0ad-3b6b-434b-a5bb-a82907667bad"
    },
    {
      "name": "Patient Management",
      "item": [
        {
          "name": "Registering patient",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "e13898c3-6b39-4e06-82fd-a233079d4a74",
                "exec": [
                  "pm.test(\"Successful POST request\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "});",
                  "const json = pm.response.json();",
                  "const patientId = json?.data?.patient?.id || json?.data?.id || \"\";",
                  "if (patientId) {",
                  "    pm.collectionVariables.set(\"diag_patient_id\", patientId);",
                  "}"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "df127f1b-0e11-4761-9010-367b9f2a025d",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "687cf81b-20b2-4902-835e-193d08c808b4",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{clerk_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Sick\",\n  \"lastName\": \"boi\",\n  \"emiratesId\": \"123456789012347\",\n  \"dateOfBirth\": \"1990-04-12\",\n  \"gender\": \"male\",\n  \"phoneNumber\": \"1234567890\",\n  \"address\": \"12 Example Street\",\n  \"knownDiseases\": [\"asthma\"],\n  \"complaints\": [\"headache\"],\n  \"entryRoute\": \"OPD\",\n  \"servicePoint\": \"Outpatient Department\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/patients/register",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "patients",
                "register"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Retrieve Patient Record By ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "467dcaa2-d09a-4b16-b7f9-3b3b74bae497",
                "exec": [
                  "pm.test(\"Successful POST request\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "});",
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "43268288-61a5-4ddd-afc3-1829a9d04e5a",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "5cc59da3-bec2-4484-b92c-b2be0b6072ee",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{doctor_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/patients/records/",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "patients",
                "records",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Append Patient Visit History",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "c3902114-30be-4acc-b1cf-a5c16153f4a1",
                "exec": [
                  "pm.test(\"Successful PATCH request\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "});",
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "6341a28b-ef3c-4e29-9d27-cc66609780b8",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "e7fb303b-4c95-4b2d-86c8-074f7df1c9fb",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{doctor_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"servicePoint\": \"A&E\",\n  \"entryRoute\": \"A&E\",\n  \"diseases\": [\"asthma\", \"hypertension\"],\n  \"referralDetails\": \"Refer to cardiology for further evaluation\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/patients/records/{{diag_patient_id}}/visits",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "patients",
                "records",
                "{{diag_patient_id}}",
                "visits"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Append Prescription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "aafd930b-0831-4438-80f5-663997d2b358",
                "exec": [
                  "pm.test(\"Successful PATCH request\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "});",
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "21ff5e03-867f-4455-b71c-caa6766cfa99",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "dc074c7d-3e2e-4a1a-bfc8-6e827e0b9462",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{doctor_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"medicines\": [\"paracetamol 500mg\", \"amoxicillin 250mg\"],\n  \"prescribedAt\": \"2026-02-20T15:30:00.000Z\",\n  \"notes\": \"Take after meals for 5 days\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/patients/records/{{diag_patient_id}}/prescriptions",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "patients",
                "records",
                "{{diag_patient_id}}",
                "prescriptions"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Append Nursing Note",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "04752ce9-d2f6-4424-bf56-6cd8668302b7",
                "exec": [
                  "pm.test(\"Successful PATCH request\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "});",
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "d78d91ad-9b9b-4201-9a3b-dc65226363f6",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "e23194c4-9c8b-49dd-b94b-57ad00be592f",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{nurse_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"treatmentDetails\": \"Wound dressing and IV fluid monitoring\",\n  \"intakeOutput\": \"Intake 1200ml, output 900ml\",\n  \"recordedAt\": \"2026-02-20T15:30:00.000Z\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/patients/records/{{diag_patient_id}}/nursing-notes",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "patients",
                "records",
                "{{diag_patient_id}}",
                "nursing-notes"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "a91beb3d-a8ec-409f-bdd2-d5755051d027"
    },
    {
      "name": "Appointments",
      "item": [
        {
          "name": "Appointments - Resolve Doctor Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "e8632e9e-9158-45a4-bfc3-6cce702abf45",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "pm.test(\"Stores doctor id and name\", function () {",
                  "    const json = pm.response.json();",
                  "    const doctor = json?.data?.user;",
                  "    pm.expect(doctor).to.be.an(\"object\");",
                  "    pm.expect(doctor.role).to.eql(\"doctor\");",
                  "    pm.collectionVariables.set(\"appointment_doctor_id\", doctor.userId || doctor._id || doctor.id);",
                  "    pm.collectionVariables.set(\"appointment_doctor_name\", `${doctor.firstName || \"\"} ${doctor.lastName || \"\"}`.trim());",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "af431f4f-73b4-44d3-b7b2-5ecd16ce7900",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "e21acaf4-07de-4bea-9169-1a705f6e91b7",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{doctor_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{gateway_url}}/api/auth/me",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "auth",
                "me"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Appointments - Get Doctor Availability",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "8d9d3736-6036-42da-bc7d-00d9f6267b28",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "7a40b98b-604b-4245-9247-477562338b6d",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "a87833f9-d856-4ecb-8aa4-5a55d037c071",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{clerk_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{gateway_url}}/api/patients/doctors/{{appointment_doctor_id}}/availability?date={{appointment_date}}",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "patients",
                "doctors",
                "{{appointment_doctor_id}}",
                "availability"
              ],
              "query": [
                {
                  "key": "date",
                  "value": "{{appointment_date}}",
                  "uuid": "6420b312-a511-4808-bd63-0f9e68d29f97"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Appointments - Upsert Doctor Schedule",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "28fcc2bc-2c2f-47b7-a8b0-c2ed0e9210e5",
                "exec": [
                  "const now = new Date();",
                  "const tomorrow = new Date(Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate() + 1));",
                  "const yyyy = tomorrow.getUTCFullYear();",
                  "const mm = String(tomorrow.getUTCMonth() + 1).padStart(2, \"0\");",
                  "const dd = String(tomorrow.getUTCDate()).padStart(2, \"0\");",
                  "const date = `${yyyy}-${mm}-${dd}`;",
                  "pm.collectionVariables.set(\"appointment_date\", date);",
                  "pm.collectionVariables.set(\"appointment_datetime_utc\", `${date}T10:00:00.000Z`);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "9babc100-88c5-4c68-b4ef-ac2e243c62d0",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "3eaa8c6a-d9b6-40da-9c51-9c624c342643",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{doctor_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"doctorName\": \"{{appointment_doctor_name}}\",\n  \"department\": \"Medicine\",\n  \"weeklyAvailability\": [\n    {\n      \"dayOfWeek\": 1,\n      \"slots\": [\n        { \"startTime\": \"09:00\", \"endTime\": \"12:00\" },\n        { \"startTime\": \"14:00\", \"endTime\": \"17:00\" }\n      ]\n    },\n    {\n      \"dayOfWeek\": 2,\n      \"slots\": [\n        { \"startTime\": \"09:00\", \"endTime\": \"12:00\" }\n      ]\n    },\n    {\n      \"dayOfWeek\": 3,\n      \"slots\": [\n        { \"startTime\": \"09:00\", \"endTime\": \"12:00\" }\n      ]\n    },\n    {\n      \"dayOfWeek\": 4,\n      \"slots\": [\n        { \"startTime\": \"09:00\", \"endTime\": \"12:00\" }\n      ]\n    },\n    {\n      \"dayOfWeek\": 5,\n      \"slots\": [\n        { \"startTime\": \"09:00\", \"endTime\": \"12:00\" }\n      ]\n    }\n  ],\n  \"source\": \"manual\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/patients/doctors/{{appointment_doctor_id}}/schedule",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "patients",
                "doctors",
                "{{appointment_doctor_id}}",
                "schedule"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Appointments - Book Patient Appointment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "f9e0fd65-f1ad-4ec9-aa72-976842ed4556",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "const json = pm.response.json();",
                  "pm.test(\"Appointment booked\", function () {",
                  "    pm.expect(json.success).to.eql(true);",
                  "    pm.expect(json.data.appointment).to.be.an(\"object\");",
                  "});",
                  "pm.collectionVariables.set(\"appointment_id\", json.data.appointment._id || \"\");"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "0a150ffc-515e-4791-9f84-89f7b3b507bf",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "8f9798c3-ca1c-47d3-a4cb-b5cc7fceeab0",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{clerk_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"doctorId\": \"{{appointment_doctor_id}}\",\n  \"doctorName\": \"{{appointment_doctor_name}}\",\n  \"appointmentDateTime\": \"{{appointment_datetime_utc}}\",\n  \"durationMinutes\": 30,\n  \"reason\": \"Follow-up consultation\",\n  \"source\": \"manual\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/patients/records/{{diag_patient_id}}/appointments",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "patients",
                "records",
                "{{diag_patient_id}}",
                "appointments"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Appointments - List Patient Appointments",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "86bbbc94-e365-4427-9421-71320b5d7345",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "pm.test(\"Contains appointments array\", function () {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json.data.appointments).to.be.an(\"array\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "2ba4e6dc-a8bd-4e87-88a8-ad66c10fee09",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "a77337dd-32e6-43c4-bdef-dc9a13d0a2c9",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{clerk_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{gateway_url}}/api/patients/records/{{diag_patient_id}}/appointments",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "patients",
                "records",
                "{{diag_patient_id}}",
                "appointments"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "8aa4520f-3911-4a5d-90ff-06c544e1fa98"
    },
    {
      "name": "Vitals",
      "item": [
        {
          "name": "Record Patient Vitals",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a839445c-d1ba-477b-8ae9-24e2b6d1c65b",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "e795ef78-e890-4418-984e-8c8b7800e7d6",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "5c000040-cac5-43c5-8a61-06c1f386e47f",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{nurse_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"temperature\": 37.2,\n  \"bp_systolic\": 120,\n  \"bp_diastolic\": 80,\n  \"pulse\": 76,\n  \"source\": \"manual\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{diagnostics_vitals_url}}/api/vitals/{{diag_patient_id}}",
              "host": [
                "{{diagnostics_vitals_url}}"
              ],
              "path": [
                "api",
                "vitals",
                "{{diag_patient_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Recent Patient Vitals",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "40c0770a-c0ca-414f-834f-2c9b2cb2b444",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "c3199dbd-9949-4ecf-8c89-11490b5a9b84",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "088c653f-c6ac-42ff-b0d6-bbb558c2b961",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{doctor_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{gateway_url}}/api/vitals/{{diag_patient_id}}",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "vitals",
                "{{diag_patient_id}}"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "b5defc4b-f2c1-41b7-847a-7e20aaf59939"
    },
    {
      "name": "Diagnostics",
      "item": [
        {
          "name": "All Diagnostic Results",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "51f114c5-e5e8-4846-94cc-66eaf6e0b8a7",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "ff6e5de3-b834-4def-8840-c2907dc0daa8",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "d2d69c99-aa4e-42ea-80b3-8f71d0488b5d",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{doctor_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{gateway_url}}/api/diagnostics?patientId={{diag_patient_id}}&machineType=CT&status=critical&page=1&limit=20",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "diagnostics"
              ],
              "query": [
                {
                  "key": "patientId",
                  "value": "{{diag_patient_id}}",
                  "uuid": "459ead40-db4c-4562-8926-190262ccde84"
                },
                {
                  "key": "machineType",
                  "value": "CT",
                  "uuid": "7b06ab62-f172-4f0c-9008-b5052bc0552b"
                },
                {
                  "key": "status",
                  "value": "critical",
                  "uuid": "e34db3ed-c53a-4407-805a-f35028f57f5b"
                },
                {
                  "key": "page",
                  "value": "1",
                  "uuid": "9fc088a1-8cc7-477e-92e0-ee294a95a0f0"
                },
                {
                  "key": "limit",
                  "value": "20",
                  "uuid": "1484c649-6d0b-47ba-94d6-16dd15ea0158"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Import results from machine",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "4d31050c-10fb-48ec-9af8-7dc8f442337c",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "const json = pm.response.json();",
                  "if (json && json.data && json.data.length) {",
                  "    pm.collectionVariables.set(\"diag_result_id\", json.data[0]._id);",
                  "}"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "795889b4-595c-4a49-b513-dd2caab09a61",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "c12cd299-bd4b-447b-b93b-baffeced58bd",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{clinician_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"patientId\": \"{{diag_patient_id}}\",\n  \"machineId\": \"XRAY-01\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/diagnostics/import/{{diag_machine_type}}",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "diagnostics",
                "import",
                "{{diag_machine_type}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Import results from machine Copy",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "96889bc0-9bfa-4182-b3ea-fd7f9dc2e943",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "e007dea1-97a6-4cae-a57b-68568a1f5ec1",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "36608b88-c331-48f8-8e3b-ea68253d8fe9",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{clinician_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{gateway_url}}/api/diagnostics/critical?patientId={{diag_patient_id}}",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "diagnostics",
                "critical"
              ],
              "query": [
                {
                  "key": "patientId",
                  "value": "{{diag_patient_id}}",
                  "uuid": "0729189a-47f5-4371-a6fb-92ca9b6582d2"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Diagnostics Stats For Patient",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "3036ad0f-5b70-4f16-a755-0b4a4b708c0b",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "4556bb07-ca8f-4154-83d5-39b4322ef8d9",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "4594ff89-3b30-4de9-a4f3-8c04f627b9c4",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{doctor_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{gateway_url}}/api/diagnostics/stats?patientId={{diag_patient_id}}",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "diagnostics",
                "stats"
              ],
              "query": [
                {
                  "key": "patientId",
                  "value": "{{diag_patient_id}}",
                  "uuid": "944c8fde-4ba4-4123-a668-6f795e10abe0"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Diagnostics By Machine",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "d817405f-72ca-4ddd-9901-4594fb500681",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "b795ac5f-a97c-47e4-9221-bad59201c4ed",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "e4d58c9d-629e-414b-87dd-18f4a877a325",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{clinician_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{gateway_url}}/api/diagnostics/machine/{{diag_machine_type}}?patientId={{diag_patient_id}}",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "diagnostics",
                "machine",
                "{{diag_machine_type}}"
              ],
              "query": [
                {
                  "key": "patientId",
                  "value": "{{diag_patient_id}}",
                  "uuid": "6abe7e4b-b4a0-415f-a015-0f40f79bca79"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Diagnostics By Patient",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a6bc1870-5932-4220-a30b-9e77884c439c",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "pm.test(\"Save first diagnostic result id\", function () {",
                  "    const json = pm.response.json();",
                  "    const rows = Array.isArray(json?.data) ? json.data : Array.isArray(json) ? json : [];",
                  "    if (rows.length > 0) {",
                  "        const resultId = rows[0]?._id || rows[0]?.id || \"\";",
                  "        if (resultId) pm.collectionVariables.set(\"diag_result_id\", resultId);",
                  "    }",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "39f655e5-0f36-4e37-ab0d-ac265621cc9c",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "ea097a2c-50b2-4b44-a667-29e435ac1614",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{doctor_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{gateway_url}}/api/diagnostics/patient/{{diag_patient_id}}",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "diagnostics",
                "patient",
                "{{diag_patient_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Diagnostic By ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "01a68091-9b2b-4562-aec5-29dd1a5b1b17",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "facfa639-f8b7-412b-9249-0a771b833f32",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "40e6530e-a711-43f8-ad9a-2cbb87850c93",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{clinician_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{gateway_url}}/api/diagnostics/{{diag_result_id}}",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "diagnostics",
                "{{diag_result_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Verify Diagnostic Result",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "41883499-c57a-4e6d-bb3f-3318cbee6945",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "cf11ed49-32d2-4bb6-89ec-fbad88767f52",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "420fe253-770e-45e9-a320-bde933ea4508",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{doctor_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{gateway_url}}/api/diagnostics/{{diag_result_id}}/verify",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "diagnostics",
                "{{diag_result_id}}",
                "verify"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "e014c672-78aa-4d1f-bb94-5b31016219ac"
    }
  ],
  "variable": [
    {
      "id": "ba281ab1-425a-457e-ae61-f49cc5333c94",
      "key": "gateway_url",
      "value": "http://localhost:3000"
    },
    {
      "id": "f5c74647-92d8-4459-962d-e6a57d67d142",
      "key": "auth_url",
      "value": "http://localhost:3001"
    },
    {
      "id": "73328e8c-97a5-466a-885f-be82dcc54510",
      "key": "patient_reg_url",
      "value": "http://localhost:3003"
    },
    {
      "id": "7a6c816e-cb69-4ef9-bd11-358801a7a4ff",
      "key": "diagnostics_vitals_url",
      "value": "http://localhost:3004"
    },
    {
      "id": "2fbc7bcf-0762-493f-ad60-49ccf6cc43fc",
      "key": "doctor_register_email",
      "value": "doctortest1@coolhospital.com"
    },
    {
      "id": "7411bca8-1349-42c8-9484-6df455450f32",
      "key": "nurse_register_email",
      "value": "nursetest1@coolhospital.com"
    },
    {
      "id": "96e33b4a-864b-476f-a759-c9bb69bbfd16",
      "key": "clerk_register_email",
      "value": "clerktest1@coolhospital.com"
    },
    {
      "id": "14fbe62c-882a-4aa5-9080-27eaf42ef8a9",
      "key": "clinician_register_email",
      "value": "cliniciantest1@coolhospital.com"
    },
    {
      "id": "54e96870-6f2a-4954-b72a-3e52f1caf2a0",
      "key": "doctor_register_token",
      "value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2OWExOTE2NTExOGYyYzQ1ZTgzYjk3ZmMiLCJlbWFpbCI6ImRvY3RvcnRlc3QxQGNvb2xob3NwaXRhbC5jb20i..."
    },
    {
      "id": "6fb6eac7-15c2-4bf1-a379-43f9a358245c",
      "key": "nurse_register_token",
      "value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2OWExOTE2NTExOGYyYzQ1ZTgzYjk4MDAiLCJlbWFpbCI6Im51cnNldGVzdDFAY29vbGhvc3BpdGFsLmNvbSIs..."
    },
    {
      "id": "efe445f9-bcdd-41a3-a4b7-697567bf073f",
      "key": "clerk_register_token",
      "value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2OWExOTE2NjExOGYyYzQ1ZTgzYjk4MDYiLCJlbWFpbCI6ImNsZXJrdGVzdDFAY29vbGhvc3BpdGFsLmNvbSIs..."
    },
    {
      "id": "365607b7-e9b5-4259-a730-5011a9d30bfb",
      "key": "clinician_register_token",
      "value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2OWExOTE2NjExOGYyYzQ1ZTgzYjk4MDMiLCJlbWFpbCI6ImNsaW5pY2lhbnRlc3QxQGNvb2xob3NwaXRhbC5j..."
    },
    {
      "id": "cd13f6a0-e1b0-4884-ae48-c663c32872b5",
      "key": "diag_patient_id",
      "value": "1"
    },
    {
      "id": "8394be43-f064-4db0-9691-ae08481e2cd8",
      "key": "diag_machine_type",
      "value": "CT"
    },
    {
      "id": "d23e15f3-31d6-4062-83ac-b4ac90e8b707",
      "key": "diag_result_id",
      "value": "69a1916a45b99e169f0ff23a"
    },
    {
      "id": "3b0b21f1-2583-46f1-ba7b-b99479ae7a79",
      "key": "appointment_date",
      "value": "2026-02-28"
    },
    {
      "id": "150a9de2-8c71-4954-95a7-6fe618c9fac0",
      "key": "appointment_datetime_utc",
      "value": "2026-02-28T10:00:00.000Z"
    },
    {
      "id": "66e89af6-5c9c-4bad-a354-0e6b8ca3f098",
      "key": "appointment_doctor_id",
      "value": "69a19165118f2c45e83b97fc"
    },
    {
      "id": "22a99bce-4734-41e2-9503-1fa6f929a3f5",
      "key": "appointment_doctor_name",
      "value": "Test Doctor"
    },
    {
      "id": "30f91608-9921-403b-bc81-9d29ab0dde37",
      "key": "appointment_id",
      "value": "69a1916957c1d7bd5cf190d7"
    },
    {
      "id": "a2c3a537-c74a-4490-9b8a-9b6a3d829ad9",
      "key": "doctor_auth_token",
      "value": ""
    },
    {
      "id": "881f3b8f-b888-49fc-b0df-f916d2941240",
      "key": "clerk_auth_token",
      "value": ""
    },
    {
      "id": "0cac5f48-6ea9-4da7-9898-5c9e01b39f95",
      "key": "nurse_auth_token",
      "value": ""
    },
    {
      "id": "3dd9bb3d-9ece-4434-b3c6-d9a8704cc3c9",
      "key": "clinician_auth_token",
      "value": ""
    }
  ]
}