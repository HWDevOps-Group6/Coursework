{
  "info": {
    "_postman_id": "f9b641fd-1ef0-4597-a7a8-453dda11e5ca",
    "name": "Testing Coursework",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Health Checks",
      "item": [
        {
          "name": "Check Auth Service Health",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "0effb736-1371-4b33-bb0c-a9433ea0a315",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "e01af24c-dad0-4271-b12e-a946d81dea38",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{auth_url}}/health",
              "host": [
                "{{auth_url}}"
              ],
              "path": [
                "health"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Check Gateway Service health",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "0effb736-1371-4b33-bb0c-a9433ea0a315",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "7de8982a-32a6-4b57-8294-592fbf632c42",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "bf2b72d1-dc11-4b56-b091-610bb97d233d",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{gateway_url}}/health",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "health"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Check Patient Registration Health",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "0effb736-1371-4b33-bb0c-a9433ea0a315",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "58ad9cdb-56a4-46bc-a329-40d50a329723",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "2d17e758-8269-40ff-8e84-7398a22d7273",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{patient_reg_url}}/health",
              "host": [
                "{{patient_reg_url}}"
              ],
              "path": [
                "health"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Check Diagnostics+Vitals Health",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "0effb736-1371-4b33-bb0c-a9433ea0a315",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "58ad9cdb-56a4-46bc-a329-40d50a329723",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "fba8415d-5415-4bbf-a4d1-54a8b8b740e0",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{diagnostics_vitals_url}}/health",
              "host": [
                "{{diagnostics_vitals_url}}"
              ],
              "path": [
                "health"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "eb2e9f41-7ad4-4e0a-a025-e0519c5543d6"
    },
    {
      "name": "Authentication & Staff",
      "item": [
        {
          "name": "Register Doctor",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "194fe8a3-85ea-4e9d-ab2c-359f12168f75",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "const json = pm.response.json();",
                  "pm.test(\"Doctor registered successfully\", function () {",
                  "    pm.expect(json.success).to.eql(true);",
                  "    pm.expect(json.data.user.role).to.eql(\"doctor\");",
                  "    pm.expect(json.data.user.email).to.eql(pm.collectionVariables.get(\"doctor_register_email\"));",
                  "    pm.expect(json.data.token).to.be.a(\"string\").and.not.empty;",
                  "});",
                  "pm.collectionVariables.set(\"doctor_register_token\", json.data.token);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "525e52ce-beff-4ae5-809e-3a6774aca7fe",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "be9efd8c-5d3f-426f-b395-2f11885ad8d2",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{doctor_register_email}}\",\n  \"password\": \"SecurePass123!\",\n  \"firstName\": \"Test\",\n  \"lastName\": \"Doctor\",\n  \"role\": \"doctor\",\n  \"phoneNumber\": \"0500000001\",\n  \"department\": \"Medicine\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/auth/register",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "auth",
                "register"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Register Nurse",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "ec2d84c3-e756-4cb1-960a-1f1de1158e1d",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "const json = pm.response.json();",
                  "pm.test(\"Nurse registered successfully\", function () {",
                  "    pm.expect(json.success).to.eql(true);",
                  "    pm.expect(json.data.user.role).to.eql(\"nurse\");",
                  "    pm.expect(json.data.user.email).to.eql(pm.collectionVariables.get(\"nurse_register_email\"));",
                  "    pm.expect(json.data.token).to.be.a(\"string\").and.not.empty;",
                  "});",
                  "pm.collectionVariables.set(\"nurse_register_token\", json.data.token);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "2f23e6af-2ea7-496e-8f4a-4798cf6be57c",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{nurse_register_email}}\",\n  \"password\": \"SecurePass123!\",\n  \"firstName\": \"Test\",\n  \"lastName\": \"Nurse\",\n  \"role\": \"nurse\",\n  \"phoneNumber\": \"0500000002\",\n  \"department\": [\"Pediatrics\", \"ENT\"]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/auth/register",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "auth",
                "register"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Register Clinician",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "47a45953-06c3-4586-b90b-f30b20c2fce2",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "const json = pm.response.json();",
                  "pm.test(\"Clinician registered successfully\", function () {",
                  "    pm.expect(json.success).to.eql(true);",
                  "    pm.expect(json.data.user.role).to.eql(\"clinician\");",
                  "    pm.expect(json.data.user.email).to.eql(pm.collectionVariables.get(\"clinician_register_email\"));",
                  "    pm.expect(json.data.token).to.be.a(\"string\").and.not.empty;",
                  "});",
                  "pm.collectionVariables.set(\"clinician_register_token\", json.data.token);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "5da9977b-4be7-4c34-9c63-d61a036fff17",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{clinician_register_email}}\",\n  \"password\": \"SecurePass123!\",\n  \"firstName\": \"Test\",\n  \"lastName\": \"Clinician\",\n  \"role\": \"clinician\",\n  \"phoneNumber\": \"0500000004\",\n  \"department\": [\"Medicine\", \"Oncology\"]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/auth/register",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "auth",
                "register"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Register Clerk",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "0f6cd30c-5908-4154-a66f-9fe4900d5861",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "const json = pm.response.json();",
                  "pm.test(\"Clerk registered successfully\", function () {",
                  "    pm.expect(json.success).to.eql(true);",
                  "    pm.expect(json.data.user.role).to.eql(\"clerk\");",
                  "    pm.expect(json.data.user.email).to.eql(pm.collectionVariables.get(\"clerk_register_email\"));",
                  "    pm.expect(json.data.token).to.be.a(\"string\").and.not.empty;",
                  "});",
                  "pm.collectionVariables.set(\"clerk_register_token\", json.data.token);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "cf7d44c7-6ea2-4705-b03c-bb14bc3f3a0f",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "fcae2586-b668-48ec-8f4f-00fbf2425f4f",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{clerk_register_email}}\",\n  \"password\": \"SecurePass123!\",\n  \"firstName\": \"Test\",\n  \"lastName\": \"Clerk\",\n  \"role\": \"clerk\",\n  \"phoneNumber\": \"0500000003\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/auth/register",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "auth",
                "register"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Logging in as a Doctor",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "bc8e46c3-e2cf-4576-b476-747b2cc06a5e",
                "exec": [
                  "pm.test(\"Successful POST request\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "});",
                  "",
                  "var jsonData = pm.response.json();",
                  "var token = jsonData.data && jsonData.data.token ? jsonData.data.token : jsonData.token;",
                  "pm.collectionVariables.set(\"doctor_auth_token\", token);",
                  "",
                  "pm.test(\"Token was successfully extracted\", function () {",
                  "    pm.expect(token).to.be.a('string').and.to.have.length.above(0);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "f99b81b9-c6ee-4938-9950-05366f88748f",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "501d84cc-7f39-4439-a4f7-de6b174d73be",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{doctor_register_email}}\",\n  \"password\": \"SecurePass123!\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/auth/login",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Logging in as a Clerk",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "bc8e46c3-e2cf-4576-b476-747b2cc06a5e",
                "exec": [
                  "pm.test(\"Successful POST request\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "});",
                  "",
                  "var jsonData = pm.response.json();",
                  "var token = jsonData.data && jsonData.data.token ? jsonData.data.token : jsonData.token;",
                  "pm.collectionVariables.set(\"clerk_auth_token\", token);",
                  "",
                  "pm.test(\"Token was successfully extracted\", function () {",
                  "    pm.expect(token).to.be.a('string').and.to.have.length.above(0);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "79b35960-8e7e-41e3-a281-cc6d61816cca",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "757fd3f7-5db6-4970-a5da-0b2915c2286e",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{clerk_register_email}}\",\n  \"password\": \"SecurePass123!\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/auth/login",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Logging in as a Nurse",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "bc8e46c3-e2cf-4576-b476-747b2cc06a5e",
                "exec": [
                  "pm.test(\"Successful POST request\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "});",
                  "",
                  "var jsonData = pm.response.json();",
                  "var token = jsonData.data && jsonData.data.token ? jsonData.data.token : jsonData.token;",
                  "pm.collectionVariables.set(\"nurse_auth_token\", token);",
                  "",
                  "pm.test(\"Token was successfully extracted\", function () {",
                  "    pm.expect(token).to.be.a('string').and.to.have.length.above(0);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "df096ddd-1643-4e1a-98fc-1182ca8fb86d",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "256a4051-ccc9-4ce7-9fd8-538627e65012",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{nurse_register_email}}\",\n  \"password\": \"SecurePass123!\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/auth/login",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Logging in as a Clinician",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "bc8e46c3-e2cf-4576-b476-747b2cc06a5e",
                "exec": [
                  "pm.test(\"Successful POST request\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "});",
                  "",
                  "var jsonData = pm.response.json();",
                  "var token = jsonData.data && jsonData.data.token ? jsonData.data.token : jsonData.token;",
                  "pm.collectionVariables.set(\"clinician_auth_token\", token);",
                  "",
                  "pm.test(\"Token was successfully extracted\", function () {",
                  "    pm.expect(token).to.be.a('string').and.to.have.length.above(0);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "e9286678-c750-4226-8bf8-6e0c89b4b1c2",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "f1289e85-bf50-4bd4-9a2a-7af0f7aa45f0",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{clinician_register_email}}\",\n  \"password\": \"SecurePass123!\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/auth/login",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Checking Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "9995b4e3-c9d3-4867-9e13-404be79a5dcc",
                "exec": [
                  "pm.test(\"Successful PUT request\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201, 204]);",
                  "});",
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "50f270c5-8a0b-401b-8d1f-f62feb2e82de",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "baf67ed1-f2e7-4e06-93dc-f2f8690e74ee",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{doctor_register_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"name\": \"Add your name in the body\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/auth/me",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "auth",
                "me"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "8eebd62e-6ed8-4216-aa8f-f0a1d9066f50"
    },
    {
      "name": "Patient Management",
      "item": [
        {
          "name": "Registering patient",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "bc8e46c3-e2cf-4576-b476-747b2cc06a5e",
                "exec": [
                  "pm.test(\"Successful POST request\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "});",
                  "const json = pm.response.json();",
                  "const patientId = json?.data?.patient?.id || json?.data?.id || \"\";",
                  "if (patientId) {",
                  "    pm.collectionVariables.set(\"diag_patient_id\", patientId);",
                  "}"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "7a33c520-7814-4b07-8649-46a42aacb1d5",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "9a03c967-77a7-44fd-8d31-8e21782e4d0e",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{clerk_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Sick\",\n  \"lastName\": \"boi\",\n  \"emiratesId\": \"123456789012347\",\n  \"dateOfBirth\": \"1990-04-12\",\n  \"gender\": \"male\",\n  \"phoneNumber\": \"1234567890\",\n  \"address\": \"12 Example Street\",\n  \"knownDiseases\": [\"asthma\"],\n  \"complaints\": [\"headache\"],\n  \"entryRoute\": \"OPD\",\n  \"servicePoint\": \"Outpatient Department\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/patients/register",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "patients",
                "register"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Retrieve Patient Record By ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "bc8e46c3-e2cf-4576-b476-747b2cc06a5e",
                "exec": [
                  "pm.test(\"Successful POST request\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "});",
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "cfebb88c-0539-4712-9107-ac94c8882ef0",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "c9345014-23ae-4a00-91ed-72a3a0f22341",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{doctor_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/patients/records/",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "patients",
                "records",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Append Patient Visit History",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "43b9b255-a5c0-4f43-a306-2dca5df76f8a",
                "exec": [
                  "pm.test(\"Successful PATCH request\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "});",
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "d3188274-f019-43af-b321-7a2f03b7fdfd",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "8a67cb97-4ea4-42fd-947e-ad011f6d95db",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{doctor_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"servicePoint\": \"A&E\",\n  \"entryRoute\": \"A&E\",\n  \"diseases\": [\"asthma\", \"hypertension\"],\n  \"referralDetails\": \"Refer to cardiology for further evaluation\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/patients/records/{{diag_patient_id}}/visits",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "patients",
                "records",
                "{{diag_patient_id}}",
                "visits"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Append Prescription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "2d1e95e8-18d1-4ef8-b4a2-8d4fd7e1aa11",
                "exec": [
                  "pm.test(\"Successful PATCH request\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "});",
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "a92f5f8a-7cb9-4eb3-aabc-ae863bc4513c",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "2fbde80b-2513-4f95-9f4c-861e3f6ccf99",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{doctor_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"medicines\": [\"paracetamol 500mg\", \"amoxicillin 250mg\"],\n  \"prescribedAt\": \"2026-02-20T15:30:00.000Z\",\n  \"notes\": \"Take after meals for 5 days\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/patients/records/{{diag_patient_id}}/prescriptions",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "patients",
                "records",
                "{{diag_patient_id}}",
                "prescriptions"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Append Nursing Note",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "183160f4-2f6f-4af5-8f0f-cd7ca3339f36",
                "exec": [
                  "pm.test(\"Successful PATCH request\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "});",
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "5dce680b-6af2-40ab-933d-13cdfebd0851",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "f6e9f777-af5b-49ac-8bcf-1aa79850fd1d",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{nurse_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"treatmentDetails\": \"Wound dressing and IV fluid monitoring\",\n  \"intakeOutput\": \"Intake 1200ml, output 900ml\",\n  \"recordedAt\": \"2026-02-20T15:30:00.000Z\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/patients/records/{{diag_patient_id}}/nursing-notes",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "patients",
                "records",
                "{{diag_patient_id}}",
                "nursing-notes"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "96ec4af0-e6ab-48e7-8970-baa1a8370d13"
    },
    {
      "name": "Appointments",
      "item": [
        {
          "name": "Appointments - Resolve Doctor Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "appt-resolve-doctor-test",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "pm.test(\"Stores doctor id and name\", function () {",
                  "    const json = pm.response.json();",
                  "    const doctor = json?.data?.user;",
                  "    pm.expect(doctor).to.be.an(\"object\");",
                  "    pm.expect(doctor.role).to.eql(\"doctor\");",
                  "    pm.collectionVariables.set(\"appointment_doctor_id\", doctor.userId || doctor._id || doctor.id);",
                  "    pm.collectionVariables.set(\"appointment_doctor_name\", `${doctor.firstName || \"\"} ${doctor.lastName || \"\"}`.trim());",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "18450589-1462-4eea-893c-de42d00ae422",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "appt-resolve-doctor-profile",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{doctor_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{gateway_url}}/api/auth/me",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "auth",
                "me"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Appointments - Get Doctor Availability",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "appt-availability-test",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "d14bef41-e790-4a2c-a5f3-c61b71fb34ba",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "appt-get-doctor-availability",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{clerk_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{gateway_url}}/api/patients/doctors/{{appointment_doctor_id}}/availability?date={{appointment_date}}",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "patients",
                "doctors",
                "{{appointment_doctor_id}}",
                "availability"
              ],
              "query": [
                {
                  "key": "date",
                  "value": "{{appointment_date}}",
                  "uuid": "6420b312-a511-4808-bd63-0f9e68d29f97"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Appointments - Upsert Doctor Schedule",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "appt-upsert-schedule-pre",
                "exec": [
                  "const now = new Date();",
                  "const tomorrow = new Date(Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate() + 1));",
                  "const yyyy = tomorrow.getUTCFullYear();",
                  "const mm = String(tomorrow.getUTCMonth() + 1).padStart(2, \"0\");",
                  "const dd = String(tomorrow.getUTCDate()).padStart(2, \"0\");",
                  "const date = `${yyyy}-${mm}-${dd}`;",
                  "pm.collectionVariables.set(\"appointment_date\", date);",
                  "pm.collectionVariables.set(\"appointment_datetime_utc\", `${date}T10:00:00.000Z`);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "appt-upsert-schedule-test",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "appt-upsert-doctor-schedule",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{doctor_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"doctorName\": \"{{appointment_doctor_name}}\",\n  \"department\": \"Medicine\",\n  \"weeklyAvailability\": [\n    {\n      \"dayOfWeek\": 1,\n      \"slots\": [\n        { \"startTime\": \"09:00\", \"endTime\": \"12:00\" },\n        { \"startTime\": \"14:00\", \"endTime\": \"17:00\" }\n      ]\n    },\n    {\n      \"dayOfWeek\": 2,\n      \"slots\": [\n        { \"startTime\": \"09:00\", \"endTime\": \"12:00\" }\n      ]\n    },\n    {\n      \"dayOfWeek\": 3,\n      \"slots\": [\n        { \"startTime\": \"09:00\", \"endTime\": \"12:00\" }\n      ]\n    },\n    {\n      \"dayOfWeek\": 4,\n      \"slots\": [\n        { \"startTime\": \"09:00\", \"endTime\": \"12:00\" }\n      ]\n    },\n    {\n      \"dayOfWeek\": 5,\n      \"slots\": [\n        { \"startTime\": \"09:00\", \"endTime\": \"12:00\" }\n      ]\n    }\n  ],\n  \"source\": \"manual\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/patients/doctors/{{appointment_doctor_id}}/schedule",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "patients",
                "doctors",
                "{{appointment_doctor_id}}",
                "schedule"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Appointments - Book Patient Appointment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "appt-booking-test",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "const json = pm.response.json();",
                  "pm.test(\"Appointment booked\", function () {",
                  "    pm.expect(json.success).to.eql(true);",
                  "    pm.expect(json.data.appointment).to.be.an(\"object\");",
                  "});",
                  "pm.collectionVariables.set(\"appointment_id\", json.data.appointment._id || \"\");"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "6aaa0d77-fd95-48b8-981a-ce342b58d3b6",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "appt-book-for-patient",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{clerk_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"doctorId\": \"{{appointment_doctor_id}}\",\n  \"doctorName\": \"{{appointment_doctor_name}}\",\n  \"appointmentDateTime\": \"{{appointment_datetime_utc}}\",\n  \"durationMinutes\": 30,\n  \"reason\": \"Follow-up consultation\",\n  \"source\": \"manual\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/patients/records/{{diag_patient_id}}/appointments",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "patients",
                "records",
                "{{diag_patient_id}}",
                "appointments"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Appointments - List Patient Appointments",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "appt-list-test",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "pm.test(\"Contains appointments array\", function () {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json.data.appointments).to.be.an(\"array\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "d249211d-a61d-4a51-a199-42663cfdda27",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "appt-list-by-patient",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{clerk_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{gateway_url}}/api/patients/records/{{diag_patient_id}}/appointments",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "patients",
                "records",
                "{{diag_patient_id}}",
                "appointments"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "d4805808-fcc2-42ec-aeb7-b8a7d8ef310c"
    },
    {
      "name": "Vitals",
      "item": [
        {
          "name": "Record Patient Vitals",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "vitals-record-test",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "2c69d76e-014c-4ea6-b46c-c235fc3e02a0",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "vitals-record-request",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{nurse_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"temperature\": 37.2,\n  \"bp_systolic\": 120,\n  \"bp_diastolic\": 80,\n  \"pulse\": 76,\n  \"source\": \"manual\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{diagnostics_vitals_url}}/api/vitals/{{diag_patient_id}}",
              "host": [
                "{{diagnostics_vitals_url}}"
              ],
              "path": [
                "api",
                "vitals",
                "{{diag_patient_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Recent Patient Vitals",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "vitals-get-test",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "3d3e138f-976b-4e74-802c-69c318981324",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "vitals-get-request",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{doctor_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{gateway_url}}/api/vitals/{{diag_patient_id}}",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "vitals",
                "{{diag_patient_id}}"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "1b3748af-843f-4fc8-9aa6-0c38e74fafe7"
    },
    {
      "name": "Diagnostics",
      "item": [
        {
          "name": "All Diagnostic Results",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "0effb736-1371-4b33-bb0c-a9433ea0a315",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "58ad9cdb-56a4-46bc-a329-40d50a329723",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "5ca1d6ea-72e3-4981-83c8-75f9be59fe2e",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{doctor_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{gateway_url}}/api/diagnostics?patientId={{diag_patient_id}}&machineType=CT&status=critical&page=1&limit=20",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "diagnostics"
              ],
              "query": [
                {
                  "key": "patientId",
                  "value": "{{diag_patient_id}}",
                  "uuid": "459ead40-db4c-4562-8926-190262ccde84"
                },
                {
                  "key": "machineType",
                  "value": "CT",
                  "uuid": "7b06ab62-f172-4f0c-9008-b5052bc0552b"
                },
                {
                  "key": "status",
                  "value": "critical",
                  "uuid": "e34db3ed-c53a-4407-805a-f35028f57f5b"
                },
                {
                  "key": "page",
                  "value": "1",
                  "uuid": "9fc088a1-8cc7-477e-92e0-ee294a95a0f0"
                },
                {
                  "key": "limit",
                  "value": "20",
                  "uuid": "1484c649-6d0b-47ba-94d6-16dd15ea0158"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Import results from machine",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "0effb736-1371-4b33-bb0c-a9433ea0a315",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "const json = pm.response.json();",
                  "if (json && json.data && json.data.length) {",
                  "    pm.collectionVariables.set(\"diag_result_id\", json.data[0]._id);",
                  "}"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "58ad9cdb-56a4-46bc-a329-40d50a329723",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "e306a00f-d93b-46a3-8dc9-eda082779902",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{clinician_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"patientId\": \"{{diag_patient_id}}\",\n  \"machineId\": \"XRAY-01\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{gateway_url}}/api/diagnostics/import/{{diag_machine_type}}",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "diagnostics",
                "import",
                "{{diag_machine_type}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Import results from machine Copy",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "0effb736-1371-4b33-bb0c-a9433ea0a315",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "58ad9cdb-56a4-46bc-a329-40d50a329723",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "f0f55968-b602-4084-b885-8727d852e28d",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{clinician_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{gateway_url}}/api/diagnostics/critical?patientId={{diag_patient_id}}",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "diagnostics",
                "critical"
              ],
              "query": [
                {
                  "key": "patientId",
                  "value": "{{diag_patient_id}}",
                  "uuid": "0729189a-47f5-4371-a6fb-92ca9b6582d2"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Diagnostics Stats For Patient",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "diag-stats-test",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "a481b2fe-d8b5-4a79-a066-4e24270d66a9",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "diag-stats-request",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{doctor_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{gateway_url}}/api/diagnostics/stats?patientId={{diag_patient_id}}",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "diagnostics",
                "stats"
              ],
              "query": [
                {
                  "key": "patientId",
                  "value": "{{diag_patient_id}}",
                  "uuid": "944c8fde-4ba4-4123-a668-6f795e10abe0"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Diagnostics By Machine",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "diag-machine-test",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "58eff697-8abc-4926-979f-334154a2b2ee",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "diag-machine-request",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{clinician_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{gateway_url}}/api/diagnostics/machine/{{diag_machine_type}}?patientId={{diag_patient_id}}",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "diagnostics",
                "machine",
                "{{diag_machine_type}}"
              ],
              "query": [
                {
                  "key": "patientId",
                  "value": "{{diag_patient_id}}",
                  "uuid": "6abe7e4b-b4a0-415f-a015-0f40f79bca79"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Diagnostics By Patient",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "diag-by-patient-test",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "pm.test(\"Save first diagnostic result id\", function () {",
                  "    const json = pm.response.json();",
                  "    const rows = Array.isArray(json?.data) ? json.data : Array.isArray(json) ? json : [];",
                  "    if (rows.length > 0) {",
                  "        const resultId = rows[0]?._id || rows[0]?.id || \"\";",
                  "        if (resultId) pm.collectionVariables.set(\"diag_result_id\", resultId);",
                  "    }",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "f49873e6-e8b4-4751-9bc7-6adb52da9f0c",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "diag-by-patient-request",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{doctor_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{gateway_url}}/api/diagnostics/patient/{{diag_patient_id}}",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "diagnostics",
                "patient",
                "{{diag_patient_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Diagnostic By ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "diag-by-id-test",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "f446f2a8-0953-4c95-a590-daa3885936c4",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "diag-by-id-request",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{nurse_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{gateway_url}}/api/diagnostics/{{diag_result_id}}",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "diagnostics",
                "{{diag_result_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Verify Diagnostic Result",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "diag-verify-test",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "f04caae7-d0fe-4b02-84d1-f3eedf9923d6",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "diag-verify-request",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{doctor_auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{gateway_url}}/api/diagnostics/{{diag_result_id}}/verify",
              "host": [
                "{{gateway_url}}"
              ],
              "path": [
                "api",
                "diagnostics",
                "{{diag_result_id}}",
                "verify"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "b7189dc8-37d3-4969-a6b9-034057635bb5"
    }
  ],
  "variable": [
    {
      "id": "e8511e78-3519-45a4-85a0-c3111fc3fee2",
      "key": "gateway_url",
      "value": "http://localhost:3000"
    },
    {
      "id": "c3314a02-c607-44f8-bf03-21ca6ae43148",
      "key": "auth_url",
      "value": "http://localhost:3001"
    },
    {
      "id": "b07b293e-b815-445c-afe0-9da457baf26b",
      "key": "patient_reg_url",
      "value": "http://localhost:3003"
    },
    {
      "id": "306dfb5a-e44c-4088-bf4c-daba05be9827",
      "key": "diagnostics_vitals_url",
      "value": "http://localhost:3004"
    },
    {
      "id": "6cad7b1a-d74b-48ef-9193-94f9b39a7d3c",
      "key": "doctor_register_email",
      "value": "doctortest1@coolhospital.com"
    },
    {
      "id": "2e0c18fa-822b-462a-a07e-243bdef97ba6",
      "key": "nurse_register_email",
      "value": "nursetest1@coolhospital.com"
    },
    {
      "id": "969b8b7b-bb9f-4d7d-b42e-20ffa8c153e5",
      "key": "clerk_register_email",
      "value": "clerktest1@coolhospital.com"
    },
    {
      "id": "d9134f62-1e8b-4ed4-b50e-807c1cb921e0",
      "key": "clinician_register_email",
      "value": "cliniciantest1@coolhospital.com"
    },
    {
      "id": "17dd53cd-d0a7-4c1f-8ab5-cee4f1ae28f8",
      "key": "doctor_register_token",
      "value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2OWExOTE2NTExOGYyYzQ1ZTgzYjk3ZmMiLCJlbWFpbCI6ImRvY3RvcnRlc3QxQGNvb2xob3NwaXRhbC5jb20i..."
    },
    {
      "id": "f59e4ca4-0d8d-47c9-9ab2-474abef08882",
      "key": "nurse_register_token",
      "value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2OWExOTE2NTExOGYyYzQ1ZTgzYjk4MDAiLCJlbWFpbCI6Im51cnNldGVzdDFAY29vbGhvc3BpdGFsLmNvbSIs..."
    },
    {
      "id": "515d228b-80b8-4603-9504-cca12378fe30",
      "key": "clerk_register_token",
      "value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2OWExOTE2NjExOGYyYzQ1ZTgzYjk4MDYiLCJlbWFpbCI6ImNsZXJrdGVzdDFAY29vbGhvc3BpdGFsLmNvbSIs..."
    },
    {
      "id": "c3b30306-d157-4fd1-96c0-91335eca3029",
      "key": "clinician_register_token",
      "value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2OWExOTE2NjExOGYyYzQ1ZTgzYjk4MDMiLCJlbWFpbCI6ImNsaW5pY2lhbnRlc3QxQGNvb2xob3NwaXRhbC5j..."
    },
    {
      "id": "c43b91e2-eb05-493e-aeec-14b31b49e5a2",
      "key": "diag_patient_id",
      "value": "1"
    },
    {
      "id": "5e64b9c6-3eab-446a-bab0-99e9cf12ec4e",
      "key": "diag_machine_type",
      "value": "CT"
    },
    {
      "id": "3264b7cf-bb47-4e37-b5b9-b34bf94886db",
      "key": "diag_result_id",
      "value": "69a1916a45b99e169f0ff23a"
    },
    {
      "id": "f5903506-1362-409d-85d7-38c6da931bcc",
      "key": "appointment_date",
      "value": "2026-02-28"
    },
    {
      "id": "72e288f9-32e6-4317-8b3d-7cea5929d44a",
      "key": "appointment_datetime_utc",
      "value": "2026-02-28T10:00:00.000Z"
    },
    {
      "id": "b257888c-e88b-4ecc-a2e7-897a4020a859",
      "key": "appointment_doctor_id",
      "value": "69a19165118f2c45e83b97fc"
    },
    {
      "id": "c175e975-6b88-4f0c-a10f-b38569898978",
      "key": "appointment_doctor_name",
      "value": "Test Doctor"
    },
    {
      "id": "894edd9c-bd47-4347-b478-8773805ca922",
      "key": "appointment_id",
      "value": "69a1916957c1d7bd5cf190d7"
    },
    {
      "id": "c10a31bb-61fd-49f1-881c-de1efcf5000a",
      "key": "doctor_auth_token",
      "value": ""
    },
    {
      "id": "cfc1e1a8-776d-49cb-9c93-326b8d3690f5",
      "key": "clerk_auth_token",
      "value": ""
    },
    {
      "id": "71e00cae-b3cd-4e93-bdaf-c6c66868f491",
      "key": "nurse_auth_token",
      "value": ""
    },
    {
      "id": "957e2f95-e9e4-4509-a3fb-21dd5914e7a1",
      "key": "clinician_auth_token",
      "value": ""
    }
  ]
}